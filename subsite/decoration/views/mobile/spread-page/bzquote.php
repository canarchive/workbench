<?php
use yii\helpers\Url;

Yii::$app->params['tdkInfos']['title'] =  '装修报价-装修预算表_装修到底需要多少钱';
Yii::$app->params['tdkInfos']['keyword'] = '装修报价，环保装修,环保家装,家装团购';
Yii::$app->params['tdkInfos']['description'] = '装修报价频道为您收集整理了大量2018装修报价单，装修预算表，装修到底需要多少钱，让您家装修更省钱！';
?>
<link rel="shortcut icon" href="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/2dea5-7182.ico" />
<link rel="icon" href="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/2dea5-7182.ico" />
<link href="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/css/d0b5e-3241.css" rel="stylesheet" />
<link href="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/css/f06b0-5882.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/css/c1fd0-5359.css" />
<link rel="stylesheet" type="text/css" href="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/css/5a65c-3642.css">
<script src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/js/jquery-1.10.2.js"></script>
<script src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/js/baidustatistics.js"></script>
<!--[if lt IE 9]>
    <script src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/js/html5shiv.min.js"></script>
<![endif]-->
<main class="decoration-calculator">
    <div class="banner">
        <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/3cf62-2485.png" alt="10秒估算装修报价"></div>
    <div class="calculator-box">
        <div class="tit-box">
            <i class="ln ln01"></i>
            <span class="tit">你家的装修预算</span>
            <i class="ln ln02"></i>
        </div>
        <div class="calculator">
            <div class="hd">
                <div class="result-box">
                    <b class="unit">元</b>
                    <div class="num-window clearfix clear">
                        <div class="ge">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/be9bd-4275.png" alt="1">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/dc239-7475.png" alt="2">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/ceb6d-2272.png" alt="3">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/abb48-1399.png" alt="4">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/82d55-2993.png" alt="5">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/7bbdd-5901.png" alt="6">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1085c-8039.png" alt="7">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/baede-2963.png" alt="8">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/38c14-7126.png" alt="9"></div>
                        <div class="shi">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1af43-1988.png" alt="0">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/be9bd-4275.png" alt="1">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/dc239-7475.png" alt="2">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/ceb6d-2272.png" alt="3">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/abb48-1399.png" alt="4">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/82d55-2993.png" alt="5">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/7bbdd-5901.png" alt="6">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1085c-8039.png" alt="7">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/baede-2963.png" alt="8">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/38c14-7126.png" alt="9"></div>
                        <div class="bai">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1af43-1988.png" alt="0">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/be9bd-4275.png" alt="1">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/dc239-7475.png" alt="2">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/ceb6d-2272.png" alt="3">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/abb48-1399.png" alt="4">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/82d55-2993.png" alt="5">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/7bbdd-5901.png" alt="6">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1085c-8039.png" alt="7">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/baede-2963.png" alt="8">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/38c14-7126.png" alt="9"></div>
                        <div class="qian">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1af43-1988.png" alt="0">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/be9bd-4275.png" alt="1">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/dc239-7475.png" alt="2">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/ceb6d-2272.png" alt="3">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/abb48-1399.png" alt="4">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/82d55-2993.png" alt="5">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/7bbdd-5901.png" alt="6">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1085c-8039.png" alt="7">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/baede-2963.png" alt="8">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/38c14-7126.png" alt="9"></div>
                        <div class="wan">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1af43-1988.png" alt="0">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/be9bd-4275.png" alt="1">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/dc239-7475.png" alt="2">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/ceb6d-2272.png" alt="3">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/abb48-1399.png" alt="4">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/82d55-2993.png" alt="5">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/7bbdd-5901.png" alt="6">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1085c-8039.png" alt="7">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/baede-2963.png" alt="8">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/38c14-7126.png" alt="9"></div>
                        <div class="shiwan">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1af43-1988.png" alt="0">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/be9bd-4275.png" alt="1">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/dc239-7475.png" alt="2">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/ceb6d-2272.png" alt="3">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/abb48-1399.png" alt="4">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/82d55-2993.png" alt="5">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/7bbdd-5901.png" alt="6">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/1085c-8039.png" alt="7">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/baede-2963.png" alt="8">
                            <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/38c14-7126.png" alt="9"></div>
                    </div>
                </div>
            </div>
            <div class="bd">
                <span>
                    <label class="tou">卧室：</label>
                    <label class="wei" id="woshi">？</label>元</span>
                <span>
                    <label class="tou">客厅：</label>
                    <label class="wei" id="base_shi">？</label>元</span>
                <span>
                    <label class="tou">厨卫：</label>
                    <label class="wei" id="base_cw">？</label>元</span>
                <span>
                    <label class="tou">其他：</label>
                    <label class="wei" id="base_other">？</label>元</span>
            </div>
        </div>
        <div class="form-box">
            <div class="form-group">
                <input id="demo1" type="text" readonly="" name="" class="text text_mj" placeholder="请选择您的所在城市">
                <input id="cityname" name="CityStr" type="hidden" value="">
                <a href="javascript:;" title="" class="text_mj_icon"></a>
            </div>
            <div class="form-group">
                <input type="number" id="HouseArea" name="HouseArea" class="text" placeholder="输入您的房屋面积">
                <b class="unit">m²</b></div>
            <div class="form-group">
                <input type="text" readonly="" id="Huxing" value="1室,1厅,1厨,1卫,1阳台" data-toggle="modal" data-target="#myModal" class="text" placeholder="请选择户型">
                <a href="javascript:;" title="" class="text_mj_icon"></a>
            </div>
            <div class="form-group">
                <input type="text" id="ApplyUser" name="ApplyUser" class="text" placeholder="如何称呼您"></div>
            <div class="form-group">
                <input type="tel" id="Mobile" name="Mobile" class="text" placeholder="输入号码，报价结果将发送到您的手机"></div>
            <button type="button" onclick="Check_BaoJia()" class="sub-btn">立即计算</button></div>
    </div>
    <div class="datas-sources">
        <span class="data-tit">
            <i class="ln ln01"></i>数据来源于
            <i class="ln ln02"></i></span>
        <div class="bd">
            <div class="item">
                <div class="txt-box fr">
                    <span class="tit">
                        <label style="color: #F79C33;margin-right: 3px;font-size: 18px;" id="fbe_num01">1311亿</label>发布额</span>
                    <div class="txt">
                        <span>保障网累计业主</span>
                        <span>发布
                            <label style="color: #F79C33;" id="fbe_num02">1311亿</label>装修金额</span></div>
                </div>
                <div class="img ft">
                    <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/f0216-2277.jpg" alt=""></div>
            </div>
            <div class="item">
                <div class="txt-box ft">
                    <span class="tit">
                        <label style="color: #F79C33;margin-right: 3px;font-size: 18px;" id="enterprises_count01">3万</label>合作装修公司</span>
                    <div class="txt">
                        <span>
                            <label style="color: #F79C33;" id="enterprises_count02">3万</label>合作装修公司</span>
                        <span>签约合同数据</span></div>
                </div>
                <div class="img fr">
                    <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/63039-3887.jpg" alt=""></div>
            </div>
            <div class="item">
                <div class="txt-box fr">
                    <span class="tit">覆盖
                        <label style="color: #F79C33;margin-right: 3px;margin-left:3px; font-size: 18px;" id="city_num01">286个</label>城市</span>
                    <div class="txt">
                        <span>覆盖
                            <label style="color: #F79C33;" id="city_num02">286个</label>城市</span>
                        <span>装修全方位数据</span></div>
                </div>
                <div class="img ft">
                    <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/7e000-8930.jpg" alt=""></div>
            </div>
            <div class="item">
                <div class="txt-box ft">
                    <span class="tit">大数据分析</span>
                    <div class="txt">
                        <span>数据实时更新,保障网大</span>
                        <span>数据帮您计算装修该花多</span>
                        <span>少钱</span></div>
                </div>
                <div class="img fr">
                    <img src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/img/c9609-3446.jpg" alt=""></div>
            </div>
        </div>
    </div>
    <footer class="company-info">
		<p><?= $this->context->currentSiteInfo['copy']; ?></p>
		<p><?= $this->context->currentSiteInfo['icp']; ?></p>
    </footer>
</main>
<div class="house-type">
    <div class="house-type-box">
        <div class="title">
            <div class="line"></div>
            <h4>选择你家的户型</h4></div>
        <ul class="shi">
            <li class="active">1室</li>
            <li>2室</li>
            <li>3室</li>
            <li>4室</li>
            <li>5室</li></ul>
        <ul class="ting">
            <li class="active">1厅</li>
            <li>2厅</li>
            <li>3厅</li>
            <li>4厅</li>
            <li>5厅</li></ul>
        <ul class="chu">
            <li class="active">1厨</li>
            <li>2厨</li>
            <li>3厨</li>
            <li>4厨</li>
            <li>5厨</li></ul>
        <ul class="wei">
            <li class="active">1卫</li>
            <li>2卫</li>
            <li>3卫</li>
            <li>4卫</li>
            <li>5卫</li></ul>
        <ul class="yangtai">
            <li class="active">1阳台</li>
            <li>2阳台</li>
            <li>3阳台</li>
            <li>4阳台</li>
            <li>5阳台</li></ul>
        <p class="sure-btn">确定</p></div>
</div>
<script src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/js/jquery.form.js"></script>
<script src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/js/common.js?v=4"></script>
<script src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/js/spreadbareadata.js" type="text/javascript"></script>
<script src="<?= Yii::getAlias('@asseturl'); ?>/spread/snew/spreadb/m/js/spreadbarea.js" type="text/javascript"></script>
<script type="text/javascript">
var area1 = new BzwArea();
area1.init({
    'trigger': '#demo1',
    //触发选择控件的文本框，同时选择完毕后name属性输出到该位置
    'valueTo': '#cityname',
    //选择完毕后id属性输出到该位置
    'keys': {
        id: 'id',
        name: 'name'
    },
    //绑定数据源相关字段 id对应valueTo的value属性输出 name对应trigger的value属性输出
    'type': 1,
    //数据源类型
    'data': BzwAreaData //数据源
});
//area1.value = [1, 13, 3]; //控制初始位置，注意：该方法并不会影响到input的value
$(function() {

    changeNum(200);

    $('#Huxing').click(function() {
        $('.house-type').fadeIn();
    });

    $('.shi li').click(function() {
        $(this).addClass('active').siblings().removeClass('active');
    });
    $('.ting li').click(function() {
        $(this).addClass('active').siblings().removeClass('active');
    });
    $('.chu li').click(function() {
        $(this).addClass('active').siblings().removeClass('active');
    });
    $('.wei li').click(function() {
        $(this).addClass('active').siblings().removeClass('active');
    });
    $('.yangtai li').click(function() {
        $(this).addClass('active').siblings().removeClass('active');
    });

    $('.sure-btn').click(function() {
        var txt = $('.shi .active').html();
        txt += ',' + $('.ting .active').html();
        txt += ',' + $('.chu .active').html();
        txt += ',' + $('.wei .active').html();
        txt += ',' + $('.yangtai .active').html();
        $('#Huxing').val(txt);
        $('.house-type').fadeOut();
    });

});

//产生固定范围的随机数
function rangeRandom(minnum, maxnum) {
    return Math.floor(minnum + Math.random() * (maxnum - minnum + 1));
}
function setPrice(price) {
        $('.num-window div').hide().find('img').hide();
        // 遍历数字,个位在length-1处
		clearInterval(number_time);
		price = price + '';

        var strl = price.length - 1;
        for (i = strl; i >= 0; i--) {
            // 遍历显示数字
            $('.num-window div').eq(strl - i).find('img').eq(price[i]).show().end().end().show();
        }
}
//time 更改间歇时间
function changeNum(time) {
	console.log(time);
    var zbj, i;
    number_time = setInterval(function() {
        zbj = rangeRandom(10000, 200000) + '';
        // 换数字之前先全隐藏
        $('.num-window div').hide().find('img').hide();
        // 遍历数字,个位在length-1处
        var strl = zbj.length - 1;
        for (i = strl; i >= 0; i--) {
            // 遍历显示数字
            $('.num-window div').eq(strl - i).find('img').eq(zbj[i]).show().end().end().show();
        }
    },
    time);
}

function Check_BaoJia() {

    var City_ID = $('#cityname').val();
    if (City_ID == '' || City_ID <= 0) {
        alert("请选择城市!");
        $('#dmeo1').click();
        return;
    }

    var House_Area = $('#HouseArea').val();
    if (House_Area == '') {
        $('#HouseArea').focus();
        alert('请输入装修面积!');
        return;
    }

    var Huxing = $('#Huxing').val();
    if (Huxing == '') {
        $('#Huxing').focus();
        alert('请选择户型!');
        $('#myModal').modal('toggle');
        return;
    }

    var Use_Name = $('#ApplyUser').val();
    if (Use_Name == '') {
        $('#ApplyUser').focus();
        alert('请输入您的称呼!');
        return;
    }

    var User_Mobile = $('#Mobile').val();
    if (User_Mobile == '' || !isMobil(User_Mobile)) {
        $('#Mobile').focus();
        alert('请输入您的手机!');
        return;
    }

    //var User_Code = $('#MobileCode').val();
    //if (User_Code == '') {
    //    $('#MobileCode').focus();
    //    alert('请输入验证码!');
    //    return;
    //}
    //验证通过
    var param = {
        'ApplyUser': Use_Name,
        'Mobile': User_Mobile,
        //'Code': 123456,
        'CityStr': City_ID,
        'Areas': House_Area,
        'Huxing': Huxing,
        'CityStrName': $('#demo1').val()
    };
	var $data = {};
    var positionName = $('#position_name').val() + ';' + Huxing;
    $data.name = Use_Name;
    $data.mobile = User_Mobile;
    $data.position = $('#position').val();
    $data.position_name = positionName;
    $data.city_input = $('#demo1').val();
    $data.area_input = House_Area;
    $data.cid = $("#cid").val();
    $data._csrf = $("#_csrf").val();

    /*$.ajax({
        url: '/activity3/price2.html',
        type: 'post',
        dataType: 'json',
        data: param,
        success: function(transport) {
            if (transport.result.success) {
                $("#demo1").val('');
                $('#HouseArea').val('');
                $('#Huxing').val('');
                $("#Mobile").val('');
                //$("#MobileCode").val('');
                //alert(transport.result.message);
                window.location.href = 'develop.html?key=' + transport.result.data + '&quanbao=' + transport.result.quanbao + '&banbao=' + transport.result.banbao;
            } else {
                $("#demo1").val('');
                $('#HouseArea').val('');
                $('#Huxing').val('');
                $("#Mobile").val('');
                alert(transport.result.message);
            }
        },
        error: function(transport) {
            alert("申请失败!");
        }
    });*/
    $.ajax({
        type: 'POST',
        data: $data,
        url: window.signupUrl,// + '/jz-signup.html',
        dataType: "json",
        success:function(data){
            if(data.status == 200){
                var returnUrl = $('#returnUrl').val();
                if ($data.area_input > 0 && data.quoteInfo.elems) {
                    var priceElems = data.quoteInfo.elems;
                    $('#base_all').html((data.quoteInfo.price/10000).toFixed(2));
					setPrice(parseInt(data.quoteInfo.price));
                    var woshi = priceElems.bedroom_master.price_result+priceElems.bedroom_second.price_result;
                    var keting = priceElems.living_room.price_result + priceElems.dining_room.price_result;
                    var chufang = priceElems.kitchen.price_result;
                    var weishj = priceElems.toilet.price_result;
                    var yangtai = priceElems.balcony.price_result;
                    var other = priceElems.other.price_result;
					$('#woshi').html(parseInt(woshi));
                    $('#base_shi').html(parseInt(keting));
                    $('#base_cw').html(parseInt(weishj + chufang));
                    $('#base_other').html(parseInt(yangtai + other));
                } else {
                    alert('您好，您已成功预约装修服务，注意接听装修顾问的电话哦');
                    window.location.href = returnUrl;
                }
            }else if ( data.status == 400 ) {
                //errorCallback(data);
                alert(data.message);
            } else {
                alert('报名失败，请您重新报名！');
            }
        }
    })
}
</script>
